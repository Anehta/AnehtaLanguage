// 真正的矩阵乘法测试（目前使用 host function）

print("====================================")
print("  矩阵乘法测试（Mat*Mat, Mat*Vec）")
print("====================================")
print("")

print("【2x2 矩阵乘法】")
print("-----------------------------------")
var m1 = [1.0, 2.0; 3.0, 4.0]
var m2 = [5.0, 6.0; 7.0, 8.0]
print("m1 = ")
print(m1)
print("m2 = ")
print(m2)
print("m1 * m2 = ")
print(m1 * m2)
// 期望: [[1*5+2*7, 1*6+2*8], [3*5+4*7, 3*6+4*8]]
//      = [[19, 22], [43, 50]]

print("")
print("【3x3 矩阵乘法】")
print("-----------------------------------")
var a = [1.0, 0.0, 0.0; 0.0, 1.0, 0.0; 0.0, 0.0, 1.0]  // 单位矩阵
var b = [2.0, 3.0, 4.0; 5.0, 6.0, 7.0; 8.0, 9.0, 10.0]
print("I (单位矩阵) = ")
print(a)
print("B = ")
print(b)
print("I * B = ")
print(a * b)
// 期望: B 本身（单位矩阵性质）

print("")
print("【2x3 矩阵 × 3x2 矩阵 = 2x2】")
print("-----------------------------------")
var c = [1.0, 2.0, 3.0; 4.0, 5.0, 6.0]  // 2x3
var d = [7.0, 8.0; 9.0, 10.0; 11.0, 12.0]  // 3x2
print("C (2x3) = ")
print(c)
print("D (3x2) = ")
print(d)
print("C * D = ")
print(c * d)
// 期望: [[1*7+2*9+3*11, 1*8+2*10+3*12], [4*7+5*9+6*11, 4*8+5*10+6*12]]
//      = [[58, 64], [139, 154]]

print("")
print("【矩阵×向量】")
print("-----------------------------------")
var neg = 0.0 - 0.707
var rot = [0.707, neg; 0.707, 0.707]  // 45度旋转矩阵
var point = [1.0, 0.0]
print("旋转矩阵 (45度) = ")
print(rot)
print("点 = ")
print(point)
print("旋转后的点 = ")
print(rot * point)
// 期望: [0.707*1 + -0.707*0, 0.707*1 + 0.707*0] = [0.707, 0.707]

print("")
print("【3x3 矩阵 × 3D 向量】")
print("-----------------------------------")
var transform = [2.0, 0.0, 0.0; 0.0, 2.0, 0.0; 0.0, 0.0, 2.0]  // 缩放2倍
var vec3d = [1.0, 2.0, 3.0]
print("缩放矩阵 (2x) = ")
print(transform)
print("向量 = ")
print(vec3d)
print("变换后 = ")
print(transform * vec3d)
// 期望: [2.0, 4.0, 6.0]

print("")
print("====================================")
print("注：当前使用 Rust host function")
print("未来将切换到 WASM SIMD 内联实现")
print("====================================")
